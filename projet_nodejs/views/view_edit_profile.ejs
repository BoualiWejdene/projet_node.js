<%- include('partials/header') %>
<form action="/profile/update/<%= user._id %>" method="POST" enctype="multipart/form-data">
    <div class="container mt-5">
        <h2 class="text-center mb-4">Modifier le Profil</h2>

        <!-- Champ Nom -->
        <div class="form-group">
            <label for="nom_user">Nom :</label>
            <input type="text" class="form-control" name="nom_user" value="<%= user.nom_user %>" required>
        </div>

        <!-- Champ Prénom -->
        <div class="form-group">
            <label for="prenom_user">Prénom :</label>
            <input type="text" class="form-control" name="prenom_user" value="<%= user.prenom_user %>" required>
        </div>

        <!-- Champ Âge -->
        <div class="form-group">
            <label for="age">Âge :</label>
            <input type="number" class="form-control" name="age" value="<%= user.age %>" required>
        </div>

        <!-- Champ Photo -->
        <div class="form-group">
            <label for="photo">Photo :</label>
            <input type="file" class="form-control" name="photo" accept="image/*">
            

    <% if (user.photo) { %>
        <div class="mt-3">
            <p>Photo actuelle :</p>
            <img 
                src="<%= user.photo.startsWith('uploads') ? '/' + user.photo : user.photo %>" 
                alt="Photo actuelle" 
                class="img-fluid" 
                style="max-width: 200px;"
            >
        </div>
    <% } %>

        </div>


        <!-- Champ Région -->
        <div class="form-group">
            <label for="region">Région :</label>
            <input type="text" class="form-control" name="region" value="<%= user.region %>" required>
        </div>


        <!-- Champ Email -->
        <div class="form-group">
            <label for="email">Email :</label>
            <input type="email" class="form-control" name="email" value="<%= user.email %>" required>
        </div>

          <!-- Champ mot de passe -->
  <div class="form-group">
    <label for="password">mot de passe :</label>
    <input type="password" class="form-control" name="mot_de_passe" value="<%= user.mot_de_passe %>" required>
   </div>

        <!-- Champ Genre  -->
        <div class="form-group">
            <label for="genre">Genre :</label><br>
            <input type="radio"  name="genre" value="homme" <% if (user.genre === 'homme') { %> checked <% } %> > Homme
            <input type="radio" name="genre" value="femme" <% if (user.genre === 'femme') { %> checked <% } %> > Femme
        </div>

        <!-- Champ Résidence en Tunisie -->
        <div class="form-group">
            <label for="ResiderEnTunisie">Réside en Tunisie :</label><br>
            <input type="radio" name="ResiderEnTunisie" value="oui" <% if (user.ResiderEnTunisie === 'oui') { %> checked <% } %> > Oui
            <input type="radio" name="ResiderEnTunisie" value="non" <% if (user.ResiderEnTunisie === 'non') { %> checked <% } %> > Non
        </div>

         <div class="form-group text-center mt-4">
            <button type="submit" class="btn btn-primary btn-lg">Mettre à jour</button>
        
        <a href="/profile/<%= user._id %>" >
            <button type="button" class="cancel-button btn btn-secondary btn-lg" >Annuler</button>
        </a> 
        </div>
    </div>
</form>

<%- include('partials/footer') %>
